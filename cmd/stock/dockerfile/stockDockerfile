FROM golang:1.25

WORKDIR /app
COPY database ./database
RUN mkdir -p cmd/stock
COPY cmd/stock/go.mod cmd/stock/go.sum ./cmd/stock
WORKDIR /app/cmd/stock
RUN go mod download

COPY cmd/stock/ .

RUN go build -o ./stock-server ./stock.go

EXPOSE 8001

CMD ["./stock-server"]

